(this.webpackJsonpwerewolf=this.webpackJsonpwerewolf||[]).push([[0],{102:function(e,t){},104:function(e,t){},119:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(61),i=n.n(o),l=n(7),c=n(15),u=n(3),m=n(4),d=n(6),p=n(5),h=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){return r.a.createElement("center",null,r.a.createElement("div",{className:"ui active dimmer",style:{position:"fixed",top:0,bottom:0,left:0,right:0}},r.a.createElement("div",{className:"ui huge text loader"},"Loading")))}}]),n}(a.Component),g=Object(l.b)(null,{login:function(){return{type:"LOGIN"}}})(h),v=n(2),y=function(e){return console.log("moving to",e),{type:"CHANGE_PAGE",payload:e}},f=n(65),E=n(30),b=n.n(E);n(99);window.speechSynthesis.getVoices();var k=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={shown:!1},a.btnClick=a.btnClick.bind(Object(v.a)(a)),a}return Object(m.a)(n,[{key:"componentWillMount",value:function(){this.setState({shown:!0})}},{key:"renderMsg",value:function(e,t){return r.a.createElement("div",{key:t,className:"ui floating message"},r.a.createElement("p",null,e))}},{key:"renderMessages",value:function(){var e=this;if(this.state.shown)return this.props.messages&&this.props.messages.length?this.props.messages.map((function(t,n){return e.renderMsg(t,n)})):this.renderMsg("You have no new notifications",0)}},{key:"btnClick",value:function(){this.setState({shown:!this.state.shown})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("center",null,r.a.createElement("h1",null,"New notifications")),r.a.createElement("br",null),this.renderMessages())}}]),n}(a.Component),w=function(){for(var e={},t=0;t<arguments.length;t++)e[arguments[t][0]]=arguments[t][1];return e},O="VILLAGER",_="HEALER",N="SEER",S="SPY",I="INVESTIGATOR",C="VETERAN",T="PRIEST",R="WEREWOLF",j="WOLF_SEER",A="WITCH",L="CREEPY_GIRL",x="DEATH_WITCH",P="ARSONIST",W="JESTER",D="FOOL",M=w([R,"Werewolf"],[O,"Villager"],[_,"Healer"],[N,"Fortune Teller"],[A,"Witch"],[W,"Jester"],[D,"Fool"],[T,"Priest"],[C,"Veteran"],[P,"Arsonist"],[j,"Wolf Seer"],[I,"Investigator"],[S,"Spy"],[j,"Wolf Seer"],[P,"Arsonist"],[L,"Creepy Girl"],[x,"Death Witch"],["TOWN_INV","\u2666 Invest \u2666"],["TOWN_ATCK","\u2666 Attack \u2666"],["TOWN_RAND","\u2666 Random \u2666"],["WOLF_RAND","\u2666 Random \u2666"],["RANDOM","\u2666 Random \u2666"]),B=w([R,"/asset/img/role/werewolf.png"],[O,"/asset/img/role/villager.png"],[_,"/asset/img/role/healer.png"],[N,"/asset/img/role/seer.png"],[A,"/asset/img/role/witch.png"],[W,"/asset/img/role/jester.png"],[D,"/asset/img/role/jester.png"],[T,"/asset/img/role/priest.png"],[C,"/asset/img/role/veteran.png"],[P,"/asset/img/role/arsonist.png"],[j,"/asset/img/role/wolf_seer.png"],[I,"/asset/img/role/investigator.png"],[S,"/asset/img/role/spy.png"],[L,"/asset/img/role/creepy_girl.png"],[x,"/asset/img/role/witch.png"]),G={LOBBY:"LOBBY",ROLE_SELECTION:"ROLE_SELECTION",PRE_GAME:"PRE_GAME",NIGHT_TRANSITION:"NIGHT_TRANSITION",NIGHT:"NIGHT",DAY_TRANSITION:"DAY_TRANSITION",DAY_CALLOUTS:"DAY_CALLOUTS",DISCUSSION:"DISCUSSION",TRIAL:"TRIAL",EXECUTION:"EXECUTION",GAME_OVER:"GAME_OVER"},H=w([R,"Pick a player to kill"],[O,"You are useless"],[_,"Pick a player to heal"],[N,"Pick a player to check"],[A,"Pick a player to spell, then pick their new target"],[W,"Pick a player to haunt"],[T,"Pick a player to kill"],[C,"Would you like to stay on alert?"],[P,"Pick a player to douse or ignite doused players"],[j,"Pick a player to check"],[I,"Pick a player to investigate"],[S,"Pick a player to look at"],[j,"Pick a player to check"],[P,"Pick a player to douse or ignite your targets"],[L,"Pick a player to give your doll to"],[x,"Pick a player to kill"]),Y=w([R,"red"],[j,"red"],[O,"green"],[_,"green"],[N,"green"],[S,"green"],[I,"green"],[T,"green"],[C,"green"],[A,"purple"],[L,"purple"],[x,"purple"],[W,"blue"],[D,"blue"],[P,"orange"],["TOWN_INV","green"],["TOWN_ATCK","green"],["TOWN_RAND","green"],["WOLF_RAND","red"],["RANDOM","white"]),V=w([C,[["Alert",!0],["Sleep",!1]]],[P,[["Ignite",!0],["Pass",!1]]]),U={EMPTY:{name:"Empty",roles:[]},CLASSIC:{name:"Classic",roles:[R,_,N,O,O,O,O,R,O]},WOW:{name:"==Wow==",roles:[R,_,"TOWN_INV",O,N,D,R,"TOWN_ATCK","TOWN_INV","WOLF_RAND","TOWN_RAND",A,"TOWN_ATCK","TOWN_INV",P,L]},"CLASSIC+":{name:"Classic+",roles:[R,_,N,O,O,O,O,R,O,O,R,O,O,R,O,O,R,O,O,R]},CHAOS:{name:"Chaos",roles:[R,_,N,O,O,W,A,O,O,R,O,O,R]}},F=null,z=null;window.VERSION="1.0.3";var J=function(e){F({type:"UPDATE_MULTIPLAYER",payload:e}),z=e.roomId||z||null};window.action=function(e,t){window.io.emit("action",{type:e,payload:t})};var K=function(){window.localStorage.setItem("werewolf__refresh_token","")},X=function(){return window.localStorage.getItem("werewolf__refresh_token")||null},q=function(e){F=e,window.onConnected=[],window.location.hostname.startsWith("localhost")?window.io=b()("ws://127.0.0.1:12988/"):window.io=b()("wss://werewolf-old.herokuapp.com/"),window.io.on("connected",(function(){if(J({connected:!0,roomId:null,players:[],id:window.io.id}),window.onConnected){var e,t=Object(f.a)(window.onConnected);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(n){t.e(n)}finally{t.f()}}X()&&window.io.emit("refresh_token",X())})),window.io.on("disconnect",(function(){J({connected:!1})})),window.io.on("room",(function(e){J({roomId:e}),location.href="#"+e,function(e){var t=e+"/"+window.io.id;window.localStorage.setItem("werewolf__refresh_token",t)}(e)})),window.io.on("join_error",(function(e){window.onJoinError&&window.onJoinError(e)})),window.io.on("state",(function(e){J(e)})),window.io.on("kick",(function(){Q(),window.Modal.open(r.a.createElement("div",null,r.a.createElement("center",null,r.a.createElement("h1",null,"You have been kicked by the host")),r.a.createElement("button",{className:"ui button",style:{backgroundColor:"#ac6635",position:"absolute",bottom:"20px",right:"20px"},onClick:function(){return Modal.close()}},"Oof")))})),window.io.on("speak",(function(e){var t;t=e,responsiveVoice.speak(t,"UK English Male",{pitch:.6,volume:2})})),window.io.on("seer_result",(function(e){var t=ee;Modal.open(r.a.createElement("center",null,r.a.createElement("h3",null,"You sense that your target is..."),r.a.createElement("div",{style:{display:"block",height:"100%"}},"\xa0"),r.a.createElement("h1",null,"GOOD"==e.seer_result?"Good":"Evil"),r.a.createElement("button",{className:"ui button",style:{backgroundColor:"#ac6635",position:"absolute",bottom:"20px",right:"20px"},onClick:function(){window.Modal.close(),t(!0)}},"Ok")))})),window.io.on("open_messages",(function(e){window.notifications=e,ne()})),window.io.on("refresh_fail",K),window.io.on("version",(function(e){e!=window.VERSION&&Modal.open(r.a.createElement("div",null,r.a.createElement("center",null,r.a.createElement("h1",null,"Uh Oh..."),r.a.createElement("h3",null,"It seems like this is not the most recent version of the game.",r.a.createElement("br",null),"Do you want to try and refresh the cache?")),r.a.createElement("div",{style:{position:"absolute",bottom:"20px",right:"20px",textAlign:"right"}},"(We are not really giving you the choice)",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{className:"ui primary button",onClick:function(){return window.location.reload(!0)}},"Yes"))))})),window.onhashchange=function(){location.hash!="#"+z&&Q()},window.io.emit("version")},Q=function(){window.io.emit("leave"),location.href="#",K(),J({roomId:null})},Z=function(e){window.io.emit("details",e)},ee=function(e){action("night_action",e)},te=function(e){action("add_role",e)},ne=function(){window.Modal.open(r.a.createElement("div",null,r.a.createElement(k,{messages:window.notifications,key:Math.random().toString()}),r.a.createElement("button",{className:"ui button",style:{backgroundColor:"#ac6635",position:"absolute",bottom:"20px",right:"20px"},onClick:function(){window.Modal.close()}},"Ok")))},ae=function(){return localStorage.getItem("werewolf__nickname")||""},re=function(){return localStorage.getItem("werewolf__avatar")||"https://preview.bitmoji.com/avatar-builder-v3/preview/head?scale=1&gender=2&style=5&rotation=0&brow=1601&cheek_details=1355&ear=1430&eye=1610&eyelash=2280&hair=1655&jaw=1410&mouth=2341&nose=2663&blush_tone=15034986&hair_tone=6700839&hair_treatment_tone=7554610&pupil_tone=7448799&skin_tone=7292807&body=10&breast=0&face_proportion=7&eye_spacing=2&eye_size=0&outfit=1018236"},oe=function(){return localStorage.getItem("werewolf__color")||"#87ceeb"},ie=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={join_loading:!1,join_error:null,create_loading:!1,create_error:null,partyId:""},a.updatePartyId=a.updatePartyId.bind(Object(v.a)(a)),a.joinParty=a.joinParty.bind(Object(v.a)(a)),a.createParty=a.createParty.bind(Object(v.a)(a)),a.partyNotFound=a.partyNotFound.bind(Object(v.a)(a)),a.createPartyError=a.createPartyError.bind(Object(v.a)(a)),a}return Object(m.a)(n,[{key:"updatePartyId",value:function(e){this.setState({partyId:e.target.value})}},{key:"joinParty",value:function(){var e=this;""!=ae()?(this.setState({join_loading:!0,join_error:null}),window.onJoinError=function(t){e.setState({join_loading:!1,join_error:t})},function(e){window.io.emit("join",e)}(this.state.partyId)):this.props.moveTo("profile")}},{key:"partyNotFound",value:function(){this.setState({join_loading:!1,join_error:"Party not found"})}},{key:"createParty",value:function(){""!=ae()?(this.setState({create_loading:!0,create_error:null}),window.io.emit("create")):this.props.moveTo("profile")}},{key:"createPartyError",value:function(){this.setState({create_loading:!1,create_error:"Error creating a party"})}},{key:"renderError",value:function(e){return e?r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("div",null,e),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null))}},{key:"render",value:function(){var e=this,t=this.state.join_loading;return r.a.createElement("div",null,r.a.createElement("div",{style:{width:"100%",textAlign:"center"}},r.a.createElement("img",{src:"/asset/img/logo.jpg",style:{height:"30vh"}}),r.a.createElement("div",{className:"ui divider"}),r.a.createElement("h1",null,"Join a party"),r.a.createElement("div",{className:"ui icon input"+(t?" loading":"")},r.a.createElement("input",{type:"number",placeholder:"Party ID...",value:this.state.partyId,onChange:this.updatePartyId}),r.a.createElement("i",{className:"play link icon",onClick:this.joinParty})),this.renderError(this.state.join_error),"or",r.a.createElement("h1",null,"Create a party"),r.a.createElement("button",{className:"ui button"+(this.state.create_loading?" loading":""),onClick:this.createParty},"Create new party"),this.renderError(this.state.create_error)),r.a.createElement("div",{style:{position:"fixed",right:0,top:0,marginTop:".5em",fontSize:"2em"}},r.a.createElement("i",{className:"cog link icon",onClick:function(){return e.props.moveTo("profile")}})))}}]),n}(a.Component),le=Object(l.b)((function(e){return{join_loading:e.auth.login}}),{moveTo:y})(ie),se=function(e){return r.a.createElement("div",{style:{backgroundColor:"gray",paddingBottom:"100%"}},r.a.createElement("div",{style:{position:"absolute",top:0,right:0,left:0,bottom:0,backgroundColor:e.color||"skyblue",textAlign:"center"}},r.a.createElement("img",{src:e.src,style:{maxWidth:"90%",maxHeight:"80%",margin:"5%"}})))},ce=["#87ceeb","#eb87ce","#afcd38","#737dff","#ff737d","#cda138","#cd38af","#ffff66"],ue=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={nickname:"",color:"skyblue",avatarOptions:[],avatar:""},a.nicknameChanged=a.nicknameChanged.bind(Object(v.a)(a)),a.save=a.save.bind(Object(v.a)(a)),a.discard=a.discard.bind(Object(v.a)(a)),a}return Object(m.a)(n,[{key:"componentWillMount",value:function(){var e=this;this.setState({nickname:ae(),color:oe(),avatar:re()}),window.io.off("bitmoji"),window.io.on("bitmoji",(function(t){console.log(t),e.setState({avatarOptions:t}),window.Modal.open(r.a.createElement("div",null,r.a.createElement("center",null,r.a.createElement("h3",null,"Select your avatar")),r.a.createElement("br",null),r.a.createElement("div",{className:"ui four cards",style:{overflowY:"scroll",maxHeight:"70vh",padding:"20px"}},e.renderCards()),r.a.createElement("div",{style:{position:"absolute",bottom:"20px",right:"20px",textAlign:"right"}},r.a.createElement("button",{className:"ui secondary button",onClick:e.avatarSelection},"Re-Shuffle"),r.a.createElement("button",{className:"ui button",onClick:function(){return Modal.close()}},"Cancel"))))}))}},{key:"nicknameChanged",value:function(e){this.setState({nickname:e.target.value})}},{key:"save",value:function(){var e=this.state,t=e.nickname,n=e.color,a=e.avatar;""===t?alert("Name can't be empty"):(!function(e){localStorage.setItem("werewolf__nickname",e)}(t),function(e){localStorage.setItem("werewolf__color",e)}(n),function(e){localStorage.setItem("werewolf__avatar",e)}(a),Z({nickname:t,color:n,avatar:a}),this.props.moveTo("main"))}},{key:"discard",value:function(){this.props.moveTo("main")}},{key:"renderBtnColor",value:function(e){var t=this;return r.a.createElement("button",{key:e,className:"circular ui icon button",style:{backgroundColor:e},onClick:function(){return t.setState({color:e})}},r.a.createElement("i",{className:"icon"+(this.state.color==e?" circle":"")}))}},{key:"setAvatar",value:function(e){this.setState({avatar:e}),window.Modal.close()}},{key:"renderCards",value:function(){var e=this;return this.state.avatarOptions.map((function(t){return r.a.createElement("div",{key:t,style:{width:"25%"},onClick:function(){return e.setAvatar(t)}},r.a.createElement("img",{src:t,style:{maxWidth:"90%",maxHeight:"90%"}}))}))}},{key:"avatarSelection",value:function(){window.io.emit("bitmoji")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("center",null,r.a.createElement("h1",null,"Profile")),r.a.createElement("br",null),r.a.createElement("div",{className:"ui container"},r.a.createElement("span",{style:me.txt},"Name"),r.a.createElement("br",null),r.a.createElement("div",{className:"ui input",style:{width:"100%"}},r.a.createElement("input",{type:"text",placeholder:"Your name",value:this.state.nickname,onChange:this.nicknameChanged})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("span",{style:me.txt},"Color"),r.a.createElement("br",null),ce.map((function(t){return e.renderBtnColor(t)})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("span",{style:me.txt},"Avatar ",r.a.createElement("i",null,"(Click to change)")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("center",null,r.a.createElement("img",{style:{height:"20vh"},src:this.state.avatar,onClick:this.avatarSelection.bind(this)})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{style:{float:"right"}},r.a.createElement("button",{className:"ui primary button",onClick:this.save},"Save"),r.a.createElement("button",{className:"ui button",onClick:this.discard},"Discard"))))}}]),n}(a.Component),me={txt:{fontSize:"large",lineHeight:"2em"}},de=Object(l.b)((function(e){return{}}),{moveTo:y})(ue),pe=n(1),he=n(12),ge=he.a.h1({visible:{opacity:1,transition:{duration:1e3}},hidden:{opacity:0}}),ve=he.a.img({visible:{opacity:1,transition:{duration:1e3}},hidden:{opacity:0,transition:{duration:1e3}}}),ye=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={phase:a.props.immediate?2:0},a.renderRole=a.renderRole.bind(Object(v.a)(a)),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.immediate||(this.timeout=setTimeout((function(){e.setState({phase:1}),e.timeout=setTimeout((function(){e.setState({phase:2})}),1300)}),3e3))}},{key:"componentWillUnmount",value:function(){this.timeout&&clearTimeout(this.timeout)}},{key:"renderRole",value:function(){var e=2==this.state.phase?B[this.props.role]:"asset/img/role_lot.gif",t=1==this.state.phase?"hidden":"visible",n=2==this.state.phase?"visible":"hidden";return console.log("Rendering ROLE ",this.props.role,M),r.a.createElement("div",null,r.a.createElement(ve,{pose:t,style:{width:"75%"},src:e}),r.a.createElement("center",null,r.a.createElement(ge,{pose:n},M[this.props.role])))}},{key:"render",value:function(){return r.a.createElement("center",null,r.a.createElement("h3",null,"You are a..."),this.renderRole())}}]),n}(a.Component),fe=he.a.img({visible:{top:20},hidden:{top:"100%",transition:{duration:500}}}),Ee=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={imgshown:"visible"},console.log("Creating an execution view",e),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.timeout=setTimeout((function(){e.timeout=null,e.setState({imgshown:"hidden"})}),3e3)}},{key:"componentWillUnmount",value:function(){this.timeout&&clearTimeout(this.timeout())}},{key:"render",value:function(){var e=this.state.imgshown?{opacity:1}:{opacity:0};return r.a.createElement("center",null,r.a.createElement("div",{className:"ui card"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"header"},"The town has decided to execute ",this.props.player.name,".")),r.a.createElement("div",{className:"content",style:{fontStyle:"italic",color:"black"}},"May god have mercy on your soul, ",this.props.player.name),r.a.createElement("div",{className:"image",style:{overflow:"hidden",width:"50vw"}},r.a.createElement("img",{src:"https://i.imgur.com/D4Lko8G.png",style:e}),r.a.createElement(fe,{src:this.props.player.image,style:be.overlapping,pose:this.state.imgshown})),r.a.createElement("br",null)))}}]),n}(a.Component),be={overlapping:{position:"absolute",top:"10%",left:"10%",height:"80%",width:"auto"}},ke=Ee,we=n(31),Oe=n.n(we),_e="https://soundimage.org/wp-content/uploads/2018/10/Our-Mountain_v003_Looping.mp3",Ne=w([G.LOBBY,{url:_e,loop:!0,volume:30}],[G.ROLE_SELECTION,{url:_e,loop:!0,volume:30}],[G.PRE_GAME,{url:_e,loop:!0,volume:30}],[G.NIGHT_TRANSITION,{url:"/asset/sound/howling.mp3",loop:!1,volume:50}],[G.NIGHT,{url:"http://soundimage.org/wp-content/uploads/2016/01/The-Castle-Beyond-the-Forest_Looping.mp3",loop:!0,volume:60}],[G.DAY_TRANSITION,{url:"/asset/sound/crowing.mp3",loop:!1,volume:50}],[G.DAY_CALLOUTS,{url:"http://soundimage.org/wp-content/uploads/2014/12/Drinking-Alone.mp3",loop:!1,volume:50}],[G.DISCUSSION,{url:"http://soundimage.org/wp-content/uploads/2014/10/Lost-Island.mp3",loop:!0,volume:40}],[G.TRIAL,{url:"http://soundimage.org/wp-content/uploads/2015/03/Goblin-Loop.mp3",loop:!0,volume:20}],[G.EXECUTION,{url:"http://soundimage.org/wp-content/uploads/2015/03/Goblin-Loop.mp3",loop:!0,volume:40}],[G.GAME_OVER,{url:"http://soundimage.org/wp-content/uploads/2016/07/RPG-Battle-Climax_v001.mp3",loop:!0,volume:40}]),Se=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){return Ne[this.props.phase]?r.a.createElement(Oe.a,{url:Ne[this.props.phase].url,volume:Ne[this.props.phase].volume,playStatus:Oe.a.status.PLAYING,loop:Ne[this.props.phase].loop}):r.a.createElement("div",null)}}]),n}(a.Component),Ie=he.a.div({visible:{right:0,left:""},hidden:{right:"",left:"100%"}}),Ce=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).renderPlayerList=a.renderPlayerList.bind(Object(v.a)(a)),a.renderSun=a.renderSun.bind(Object(v.a)(a)),a.renderPregameHeader=a.renderPregameHeader.bind(Object(v.a)(a)),a.renderIngameHeader=a.renderIngameHeader.bind(Object(v.a)(a)),a.renderHeader=a.renderHeader.bind(Object(v.a)(a)),a.renderMainDiv=a.renderMainDiv.bind(Object(v.a)(a)),a.state={timer:null},a}return Object(m.a)(n,[{key:"componentWillMount",value:function(){var e=this;this.timer=setInterval((function(){var t=e.props.timer?Math.max(0,e.props.timer-(new Date).getTime()):null;t!=e.state.timer&&e.setState({timer:t})}),150)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"makeBlameDiv",value:function(e){return r.a.createElement("div",null,r.a.createElement("strong",{style:{color:"#f00",borderRadius:"10px",padding:"2px",backgroundColor:"black"}},"\ud83e\udc46 ",e))}},{key:"renderVotesPanel",value:function(e,t){return r.a.createElement("div",{style:{position:"absolute",top:0,left:0,borderBottomRightRadius:"10px",padding:"5px",backgroundColor:"rgba(255, 0, 0, 0.8)",color:"white",border:t?"3px solid gold":"3px solid red",borderLeft:"",borderTop:""}},e)}},{key:"renderPlayerCard",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.onclick||function(){return 0},a=t.votes?t.votes(e):0,o=e.dead?Te.dead:Te.alive,i=e.id==this.props.network_id?{boxShadow:"0 0 0 3pt gold",borderRadius:"2px"}:{},l=e.dead?"https://www.freeiconspng.com/uploads/skull-and-crossbones-png-3.png":e.image;return r.a.createElement("div",{className:"ui fluid card",onClick:function(){return n(e)},style:Object(pe.a)(Object(pe.a)({},i),{},{marginTop:".4em",marginBottom:".4em"}),key:e.id},r.a.createElement("div",{className:"image"},r.a.createElement(se,{src:l,color:e.dead?"transparent":e.color}),r.a.createElement("div",{style:{position:"absolute",bottom:0,right:0,left:0,textAlign:"center"}},r.a.createElement("div",{style:Object(pe.a)(Object(pe.a)({},o),{},{width:"100%"})},e.name.substr(0,15))),a?this.renderVotesPanel(a,this.props.player.vote==e.id):null))}},{key:"renderPlayerList",value:function(e){var t=this,n=this.props.players.filter((function(e,t){return t%4==0})).map((function(n){return t.renderPlayerCard(n,e)})),a=this.props.players.filter((function(e,t){return t%4==1})).map((function(n){return t.renderPlayerCard(n,e)})),o=this.props.players.filter((function(e,t){return t%4==2})).map((function(n){return t.renderPlayerCard(n,e)})),i=this.props.players.filter((function(e,t){return t%4==3})).map((function(n){return t.renderPlayerCard(n,e)}));return r.a.createElement("div",{className:"ui four column grid"},r.a.createElement("div",{className:"ui column",style:{padding:"0.2rem"}},n),r.a.createElement("div",{className:"ui column",style:{padding:"0.2rem"}},a),r.a.createElement("div",{className:"ui column",style:{padding:"0.2rem"}},o),r.a.createElement("div",{className:"ui column",style:{padding:"0.2rem"}},i))}},{key:"renderWinnersList",value:function(e){return r.a.createElement("div",{className:"ui middle aligned list"},"Winning players:",e.map((function(e){return r.a.createElement("div",{key:e.id,className:"item"},r.a.createElement("img",{className:"ui avatar image",src:e.image}),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"header"},r.a.createElement("strong",null,e.name)," (",M[e.role],")")))})))}},{key:"sendSkip",value:function(){action("skip_day")}},{key:"renderStartButton",value:function(){var e=this;return this.props.is_host&&!this.props.in_game?r.a.createElement("div",null,r.a.createElement("div",{style:{position:"fixed",right:0,top:0,marginTop:"1em",marginRight:"0.5em",zIndex:10}},r.a.createElement("button",{style:{backgroundColor:"#ac6635",color:"#f3f3f3"},className:"ui button",onClick:this.sendStartGame},"Start")),r.a.createElement("div",{style:{position:"fixed",left:0,top:0,marginTop:"1em",marginLeft:"0.5em",zIndex:10}},r.a.createElement("button",{className:"ui button",onClick:function(){return e.props.moveTo("setup")}},"Setup"))):this.props.is_host&&this.props.phase==G.DISCUSSION?r.a.createElement("div",null,r.a.createElement("div",{style:{position:"fixed",right:0,top:0,marginTop:"1em",marginRight:"0.5em",zIndex:10}},r.a.createElement("button",{style:{backgroundColor:"#ac6635",color:"#f3f3f3"},className:"ui button",onClick:this.sendSkip},"Skip"))):void 0}},{key:"renderSun",value:function(){if(this.props.in_game)return r.a.createElement("div",{style:{position:"fixed",left:0,top:0,marginTop:"1em",marginLeft:"0.5em",zIndex:10}},r.a.createElement("i",{className:"ui icon "+(this.props.is_night?"moon":"sun"),style:{fontSize:"2em"}}))}},{key:"renderPregameHeader",value:function(){return r.a.createElement("div",{style:Te.headerStyle},"Party id:",r.a.createElement("h1",null,this.props.partyId))}},{key:"renderIngameHeader",value:function(){var e={ROLE_SELECTION:"ROLES LOT...",PRE_GAME:"Get ready to play...",NIGHT_TRANSITION:"The night shall now begin...",NIGHT:"Night",DAY_TRANSITION:"The day shall now begin...",DISCUSSION:"Discussion...",EXECUTION:"Execution!",GAME_OVER:"Game over!"}[this.props.phase]||this.props.message;return this.props.player.active&&this.props.phase==G.NIGHT&&(e="SPOOKY_DOLL"==this.props.nightIndex?"Pass the spooky doll to someone":H[this.props.player.role]),r.a.createElement("div",{style:Object(pe.a)(Object(pe.a)({},Te.headerStyle),{},{marginLeft:"3em",marginTop:".5em"})},r.a.createElement("h3",null,e))}},{key:"renderHeader",value:function(){return this.props.in_game?r.a.createElement("div",null,this.renderIngameHeader(),this.renderSun()):this.renderPregameHeader()}},{key:"renderRoleSelection",value:function(){return r.a.createElement(ye,{role:this.props.player.role})}},{key:"renderBanner",value:function(e){return r.a.createElement("center",null,r.a.createElement("div",{style:{position:"block",height:"20vh"}}),r.a.createElement("i",{className:"massive icon "+e}))}},{key:"kickPlayer",value:function(e){var t;this.props.is_host&&(t=e.id,action("kick",t))}},{key:"renderGameOver",value:function(){return r.a.createElement("center",null,r.a.createElement("div",{style:{position:"block",height:"10vh"}}),r.a.createElement("h1",null,{WEREWOLVES:"Werewolves Win!",VILLAGE:"Village Wins!",DRAW:"Wipeout!",NOKILL:"Draw! (no kills)",NEUTRAL:"Neutral Players Win!",WITCH:"Witch wins!",ARSONIST:"Arsonist wins!",FOOL:"Fool wins!"}[this.props.winning_faction]||"Draw!"),this.renderWinnersList(this.props.players.filter((function(e){return e.won}))))}},{key:"renderRolesList",value:function(){return this.props.roles.slice(0,this.props.players.length).map((function(e,t){return r.a.createElement("div",{key:t,style:{display:"inline-block",fontWeight:"bold",color:Y[e]}},M[e],",\xa0\xa0")}))}},{key:"renderIdleDiv",value:function(){var e=this;return r.a.createElement("div",null,this.renderPlayerList({onclick:function(t){return e.kickPlayer(t)}}),r.a.createElement("p",null,"\xa0"),r.a.createElement("div",null,"Roles: ",this.renderRolesList()))}},{key:"renderMainDiv",value:function(){var e=this,t=this.props.phase;return t==G.LOBBY?this.renderIdleDiv():t==G.ROLE_SELECTION?this.renderRoleSelection():t==G.PRE_GAME||t==G.DAY_CALLOUTS?this.renderPlayerList():t==G.NIGHT_TRANSITION?this.renderBanner("moon"):t==G.NIGHT?this.renderNightdiv():t==G.DAY_TRANSITION?this.renderBanner("sun"):t==G.DISCUSSION?this.renderPlayerList({onclick:function(e){return function(e){action("set_vote",e)}(e.id)},votes:function(t){return e.props.players.filter((function(e){return e.vote==t.id})).length}}):t==G.TRIAL?this.renderTrial():t==G.EXECUTION?this.renderExecution():t==G.GAME_OVER?this.renderGameOver():void 0}},{key:"nightActionPlayer",value:function(e){ee(e.id)}},{key:"renderNightdiv",value:function(){var e=this;return this.props.player.active?r.a.createElement("div",null,this.renderPlayerList({onclick:this.nightActionPlayer,votes:this.props.player.role==R?function(t){return e.props.players.filter((function(e){return e.role==R&&!e.dead&&e.target==t.id})).length}:null}),this.renderCustomButtons()):this.renderBanner("moon")}},{key:"send_execute",value:function(){action("trial_guilty")}},{key:"send_free",value:function(){action("trial_innocent")}},{key:"renderGuiltyInno",value:function(){if(this.props.is_host)return r.a.createElement("div",{className:"extra content"},r.a.createElement("div",{className:"ui two buttons"},r.a.createElement("div",{className:"ui basic red button",onClick:this.send_execute},"Execute"),r.a.createElement("div",{className:"ui basic green button",onClick:this.send_free},"Free")))}},{key:"renderTrial",value:function(){console.log(this.props.player_on_stand);var e=this.props.player_on_stand;return r.a.createElement("center",null,r.a.createElement("div",{className:"ui card"},r.a.createElement("div",{className:"image",style:{width:"50%",backgroundColor:"transparent",margin:"20px"}},r.a.createElement("img",{src:e.image})),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"header"},e.name)),this.renderGuiltyInno()))}},{key:"renderExecution",value:function(){return r.a.createElement("div",null,r.a.createElement(ke,{player:this.props.player_on_stand}),r.a.createElement("div",{style:{height:"100vh"}},"\xa0"))}},{key:"sendStartGame",value:function(){action("start_game")}},{key:"renderTimer",value:function(){var e=Math.ceil(this.state.timer/1e3||0),t=e>=60?Math.floor(e/60)+":"+("0"+e%60).slice(-2):e.toString();return r.a.createElement(Ie,{pose:this.state.timer?"visible":"hidden",style:{position:"fixed",bottom:"10vh"}},r.a.createElement("div",{className:"ui label big",style:{backgroundColor:this.props.main_color,color:this.props.secondary_color,textAlign:"center"}},r.a.createElement("i",{className:"time icon",style:{margin:0,marginBottom:"4px"}}),r.a.createElement("br",null),t))}},{key:"renderCustomButtons",value:function(){return r.a.createElement("center",null,r.a.createElement("br",null),this.customButtonList(V[this.props.player.role]))}},{key:"customButtonList",value:function(e){return(e=e||[["Pass",!1]]).map((function(e){return r.a.createElement("button",{key:e[0],className:"ui primary button",onClick:function(){return ee(e[1])}},e[0])}))}},{key:"showRole",value:function(){console.log(this.props.player),this.props.player.role?window.Modal.open(r.a.createElement("div",null,r.a.createElement(ye,{immediate:!0,role:this.props.player.role}),r.a.createElement("div",{style:{position:"absolute",bottom:"20px",right:"20px",textAlign:"right"}},r.a.createElement("button",{className:"ui button",onClick:function(){return Modal.close()}},"Close")))):window.Modal.open(r.a.createElement("div",null,r.a.createElement("center",null,r.a.createElement("h1",null," "),r.a.createElement("h1",null,"Cannot show your role right now")),r.a.createElement("div",{style:{position:"absolute",bottom:"20px",right:"20px",textAlign:"right"}},r.a.createElement("button",{className:"ui button",onClick:function(){return Modal.close()}},"Close"))))}},{key:"renderBottomMenu",value:function(){return r.a.createElement("div",{className:"ui three item inverted secondary menu",style:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:"black"}},r.a.createElement("a",{className:"item",onClick:function(){return Q()}},"Exit"),r.a.createElement("a",{className:"item",onClick:this.showRole.bind(this)},"Show Role"),this.props.phase==G.DISCUSSION?r.a.createElement("a",{className:"item",onClick:function(){return ne()}},"Notifications"):null)}},{key:"renderMusic",value:function(){if(this.props.is_host)return r.a.createElement(Se,{phase:this.props.phase})}},{key:"render",value:function(){var e=this.props.is_night&&this.props.in_game?Te.night:Te.day;return r.a.createElement("div",{id:"elid"},r.a.createElement("div",{style:Object(pe.a)(Object(pe.a)({},e),{},{position:"fixed",top:0,bottom:0,left:0,right:0})}),r.a.createElement("div",{style:Object(pe.a)(Object(pe.a)({},e),{},{position:"absolute",top:0,bottom:0,left:0,right:0})},r.a.createElement("center",{style:Object(pe.a)(Object(pe.a)({},e),{},{position:"fixed",top:0,right:0,left:0,zIndex:9})},this.renderHeader()),r.a.createElement("center",null," ",this.renderHeader()),r.a.createElement("div",{className:"ui divider"}),r.a.createElement("div",{className:"ui container"},this.renderMainDiv()),this.renderStartButton(),this.renderTimer(),this.renderBottomMenu(),this.renderMusic()))}}]),n}(a.Component),Te={night:{backgroundColor:"#111",color:"royalBlue"},day:{backgroundColor:"#f3f3f3"},headerStyle:{minHeight:"7vh"},dead:{backgroundColor:"rgba(240,240,240,0.6)",color:"gray"},alive:{color:"white",backgroundColor:"rgba(43,96,222,0.6)"}},Re=Object(l.b)((function(e){var t=!!~[G.ROLE_SELECTION,G.PRE_GAME,G.NIGHT_TRANSITION,G.NIGHT,G.DAY_TRANSITION,G.DAY_CALLOUTS,G.DISCUSSION,G.TRIAL,G.EXECUTION,G.GAME_OVER].indexOf(e.mp.phase),n=!!~[G.NIGHT_TRANSITION,G.NIGHT].indexOf(e.mp.phase),a=t?e.mp.players:e.mp.clients,r=a.filter((function(t){return t.id==e.mp.id}));return r=r.length>0?r[0]:null,console.log("Role ",r.role),{partyId:e.mp.roomId,players:a,player:r,network_id:e.mp.id||null,is_host:e.mp.clients.length>0&&e.mp.clients[0].id==e.mp.id,in_game:t,is_night:n,message:e.mp.message,phase:e.mp.phase||G.LOBBY,timer:e.mp.timer,main_color:n?"royalblue":"#ac6635",secondary_color:n?"#111":"#f3f3f3",player_on_stand:e.mp.player_on_stand,winning_faction:e.mp.winning_faction,nightIndex:e.mp.night_index,roles:e.mp&&e.mp.roles||[]}}),{moveTo:y})(Ce),je=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={roles:[]},window.io&&(window.io.off("roles_list"),window.io.on("roles_list",(function(e){a.setState({roles:e})}))),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){$(".ui.dropdown").dropdown()}},{key:"renderRoleBtn",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return r.a.createElement("button",{onClick:function(){return te(e)},className:"ui inverted fluid button "+n,style:Object(pe.a)({marginBottom:"5px"},a)},t)}},{key:"renderRoleCard",value:function(e,t,n){console.log(t);var a="white"==n?{background:"linear-gradient(to right, orange , yellow, green, cyan, blue, violet)"}:{};return r.a.createElement("button",{key:e,onClick:function(){action("remove_role",e)},className:"ui fluid button "+n,style:Object(pe.a)({marginBottom:"5px"},a)},t)}},{key:"renderRolesList",value:function(){var e=this;return console.log(this.props),this.props.roles.map((function(t,n){return e.renderRoleCard(n,M[t],Y[t])}))}},{key:"presetClick",value:function(e){var t,n=(e=e||window.event).target||s.srcElement;t=n.getAttribute("data-value"),action("set_preset",U[t].roles),window.cE=n}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{style:{position:"fixed",right:0,bottom:0,marginBottom:"1em",marginRight:"0.5em",zIndex:10}},r.a.createElement("button",{className:"ui primary button",onClick:function(){return e.props.moveTo("game")}},"Save & Continue")),r.a.createElement("center",null,r.a.createElement("h2",null,"Game Preset"),r.a.createElement("br",null)),r.a.createElement("div",{className:"ui container grid two columns",style:{height:"80vh"}},r.a.createElement("div",{className:"ui column",style:{overflowY:"auto",height:"100%"}},r.a.createElement("center",null,"Add roles:"),r.a.createElement("div",{onClick:function(t){return e.presetClick(t)}},r.a.createElement("select",{className:"ui fluid dropdown"},r.a.createElement("option",{value:""},"Presets"),Object.keys(U).map((function(e){return r.a.createElement("option",{key:e,value:e},U[e].name)})))),r.a.createElement("br",null),this.renderRoleBtn("VILLAGER","Villager","green"),this.renderRoleBtn("HEALER","Healer","green"),this.renderRoleBtn("SEER","Fortune Teller","green"),this.renderRoleBtn("SPY","Spy","green"),this.renderRoleBtn("INVESTIGATOR","Investigator","green"),this.renderRoleBtn("VETERAN","Veteran","green"),this.renderRoleBtn("PRIEST","Priest","green"),r.a.createElement("hr",null),this.renderRoleBtn("WEREWOLF","Werewolf","red"),this.renderRoleBtn("WOLF_SEER","Wolf Seer","red"),r.a.createElement("hr",null),this.renderRoleBtn("ARSONIST","Arsonist","orange"),this.renderRoleBtn("WITCH","Witch","purple"),this.renderRoleBtn("CREEPY_GIRL","Creepy Girl","purple"),this.renderRoleBtn("JESTER","Jester","blue"),this.renderRoleBtn("FOOL","Fool","blue"),r.a.createElement("hr",null),this.renderRoleBtn("TOWN_INV","\u2666 Invest \u2666","green"),this.renderRoleBtn("TOWN_ATCK","\u2666 Attack \u2666","green"),this.renderRoleBtn("TOWN_RAND","\u2666 Random \u2666","green"),this.renderRoleBtn("WOLF_RAND","\u2666 Random \u2666","red"),this.renderRoleBtn("RANDOM","Random","white",{background:"linear-gradient(to right, orange , yellow, green, cyan, blue, violet)"})),r.a.createElement("div",{className:"ui column",style:{overflowY:"auto",height:"100%"}},r.a.createElement("center",null,"Roles:"),this.renderRolesList())))}}]),n}(a.Component),Ae=Object(l.b)((function(e){return{roles:e.mp&&e.mp.roles||[]}}),{moveTo:y})(je),Le=he.a.div({open:{marginBottom:"5px",marginTop:"5px",opacity:1,transition:{duration:300,ease:"backOut"}},closed:{marginBottom:"50%",marginTop:"50%",opacity:0},hardClosed:{marginBottom:"50%",marginTop:"50%",opacity:0,transition:{duration:0}}}),xe=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),a=t.call(this,e),window.Modal=Object(v.a)(a),a.state={openState:"closed",display:"none"},a.modalContent=null,a}return Object(m.a)(n,[{key:"__show",value:function(){this.setState({openState:"open",display:""})}},{key:"__hide",value:function(){this.setState({openState:"hardClosed",display:"none"})}},{key:"__close",value:function(){var e=this;this.setState({openState:"closed"}),setTimeout((function(){"closed"!=e.state.openState&&"hardClosed"!=e.state.openState||e.setState({display:"none"})}),500)}},{key:"open",value:function(e){var t=this;console.log(this.state.openState),this.modalContent=e,"open"==this.state.openState?(this.__hide(),setTimeout((function(){return t.__show()}),1)):this.__show()}},{key:"close",value:function(){this.__close()}},{key:"componentWillMount",value:function(){}},{key:"render",value:function(){return r.a.createElement(Le,{pose:this.state.openState,style:Object(pe.a)(Object(pe.a)({},Pe.modal),{},{display:this.state.display})},this.modalContent)}}]),n}(a.Component),Pe={modal:{margin:"15px",padding:"10px",top:0,bottom:0,left:0,right:0,position:"fixed",backgroundColor:"#ececec",borderRadius:"10px",fontSize:"larger",border:"4px solid #ac6635",zIndex:10}},We=xe;window.xx=function(){};var De=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"componentDidMount",value:function(){q(this.props.dispatch),window.onConnected.push((function(){Z({nickname:ae(),color:oe(),avatar:re()})}))}},{key:"renderDimmer",value:function(){if(!this.props.connected)return r.a.createElement(g,null)}},{key:"renderScreen",value:function(){return this.props.roomId?"setup"==this.props.page?r.a.createElement(Ae,null):r.a.createElement(Re,null):"profile"==this.props.page?r.a.createElement(de,null):r.a.createElement(le,null)}},{key:"render",value:function(){return r.a.createElement("div",null,this.renderScreen(),this.renderDimmer(),r.a.createElement(We,null))}}]),n}(a.Component),Me=Object(l.b)((function(e){return{page:e.pages.page,connected:e.mp.connected,roomId:e.mp.roomId}}))(De),Be={login:!0},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(pe.a)(Object(pe.a)({},e),{},{login:!0});default:return e}},He={page:"dev"},Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_PAGE":return Object(pe.a)(Object(pe.a)({},e),{},{page:t.payload});default:return e}},Ve={roomId:null,players:[{id:"182736125",name:"Yotam",img:"https://semantic-ui.com/images/avatar/small/steve.jpg"},{id:"6345234318",name:"Koren",img:"https://semantic-ui.com/images/avatar2/small/matthew.png"},{id:"34523657445",name:"Ron",img:"https://semantic-ui.com/images/avatar2/large/rachel.png"},{id:"09345342314",name:"Shai",img:"https://semantic-ui.com/images/avatar2/small/elyse.png"},{id:"34543657445",name:"Shir",img:"https://semantic-ui.com/images/avatar/large/elliot.jpg"},{id:"09394342314",name:"Daniel",img:"https://semantic-ui.com/images/avatar/large/daniel.jpg"},{id:"34543657245",name:"Shaked",img:"https://semantic-ui.com/images/avatar2/large/molly.png"},{id:"09394372314",name:"Or",img:"https://semantic-ui.com/images/avatar/large/jenny.jpg"},{id:"34543657449",name:"Diana",img:"https://semantic-ui.com/images/avatar/large/helen.jpg"},{id:"19394342314",name:"Kalman",img:"https://semantic-ui.com/images/avatar/large/veronika.jpg"}],clients:[],connected:!1},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_MULTIPLAYER":return Object(pe.a)(Object(pe.a)({},e),t.payload);default:return e}},Fe=Object(c.c)({auth:Ge,pages:Ye,mp:Ue}),ze=Object(c.a)()(c.d);i.a.render(r.a.createElement(l.a,{store:ze(Fe)},r.a.createElement(Me,null)),document.querySelector(".container"))},96:function(e,t){}},[[119,1,2]]]);
//# sourceMappingURL=main.637860dc.chunk.js.map